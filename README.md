#### Датасет был предоставлен в рамках образовательного кейса
Changellenge Education  [Changellenge education](https://changellenge-education.com/data-analyst)

Весь анализ, моделирование,
интерпретация результатов и разработка дашборда выполнены самостоятельно.

# Анализ рынка недвижимости по регионам и прогнозирование цены за аренду 
  End-to-end проект анализа данных и машинного обучения

## Краткое описание проекта

Разработана ML-модель прогнозирования стоимости аренды квартир
на основе анализа рынка недвижимости.

Проект включает полный цикл работы с данными:
EDA → feature engineering → обучение моделей →
анализ ошибок → бизнес-рекомендации →
интерактивный аналитический дашборд.

Лучшая модель: XGBoost  
Качество: **R² = 0.78 | MAPE = 15.76%**

Модель может использоваться для автоматизированной оценки
стоимости аренды в массовом сегменте рынка недвижимости.

## Цель проекта
Создать комплексное решение для анализа рынка аренды недвижимости, сочетающее ML-модель для точного прогнозирования стоимости и интерактивный дашборд для визуального анализа факторов ценообразования.

## Бизнес-задача

Рынок аренды недвижимости характеризуется высокой
вариативностью цен и субъективностью оценки объектов.

Цель — разработать инструмент,
позволяющий автоматически оценивать рыночную стоимость аренды
и выявлять факторы, влияющие на ценообразование.

## Pipeline проекта

1. Очистка и подготовка данных
2. Исследовательский анализ (EDA)
3. Генерация признаков
4. Обучение моделей (Random Forest, XGBoost)
5. Сравнение качества моделей
6. Анализ ошибок
7. Визуализация результатов в Tableau

## Инструменты

### **1. Анализ данных и ML-моделирование**
* **Google Colab: Python (Pandas, Scikit-learn, Matplotlib/Seaborn, NumPy)**
  
  - Очистка и предобработка данных
  - Разведочный анализ (EDA)
  - Построение и валидация ML-моделей
  - Анализ важности признаков

### **2. Визуализация и бизнес-аналитика**  
* **Tableau**
  - Интерактивный дашборд
  - Сравнительный анализ рынка недивжимости по регионам
  - Выявление "выгодных" предложений
  - Анализ влияния признаков(характеристик) квартир на ценообразование

## Источники информации
Выборка данных по аренде жилья: цены, площадь, этажность, количество комнат, качество ремонта, региональная принадлежность и условия депозита.

## Структура проекта
*   `ML_model_real_estate.ipynb` - полный цикл анализа и построения модели.
*   `clear_data_rental_price` - очищенные данные.
  
## Интерактивный аналитический дашборд рынка аренды

Дашборд разработан для визуального анализа структуры рынка,
сравнения регионов и выявления факторов,
влияющих на стоимость аренды квартир.

[Посмотреть интерактивный дашборд в Tableau Public](https://public.tableau.com/app/profile/aleksandra.grabovenko/viz/_17530983482070/sheet15#1)
  
![[Rental Market Analysis Dashboard]](https://github.com/Alexa-grab/desktop-tutorial/blob/main/Dashboard%20Rental%20Price%20Prediction.png)


## Этапы решения:

### Построение ML модели для прогнозирования рыночной цены на аренду квартир

**1. Предобработка данных**
 - Приведение названий столбцов к единому формату;
 - Анализ и обработка пропущенных значений;
 - Корректировка типов данных в столбцах area_total (площадь) и create_date (дата создания объявления);
 - Устранение дубликатов на основе совпадений по 9 ключевым параметрам.
   
**2. Анализ и преобразование признаков**
 - Исследование распределения и аномалий в признаках:
 - area_total – общая площадь помещения;
 - deposit – размер депозита;
 - rooms – количество комнат;
 - repair_type – тип ремонта;
 - floor – этаж расположения квартиры.
   
**3. Анализ целевой переменной-цены за аренду квартиры**
 - Статистический анализ распределения цен;
 - Сегментация рынка аренды:
   - Эконом-сегмент
   - Премиум-сегмент
   - Элитный сегмент
 - Сравнительный анализ цен по регионам:
   - Средние значения и распределение;
   - Количество предложений в каждом регионе;
   - Зависимость цены от площади.
 -  Выявление аномалий:
    - Непропорционально высокие цены для малогабаритных квартир (до 40 м²);
    - Заниженные цены на просторное жильё (от 90 м²).
      
**4. Генерация новых признаков**
 - Создание 12 дополнительных фичей для повышения точности модели.
   
**5. Корреляционный анализ**
 - Построение тепловой карты корреляций для выявления ключевых факторов, влияющих на цену аренды.
   
**6. Разработка и тестирование ML-моделей**
 - Обучение и оценка производительности моделей.
   
 **6.1. RandomForestRegressor**
 
  - **Точность модели:**
    
  ![метрики random forest](https://github.com/Alexa-grab/screenshots--for--projects./blob/main/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%20%D1%82%D0%BE%D1%87%D0%BD%D0%BE%D1%81%D1%82%D1%8C%20RandomForest.png)

  - **Основные признаки на которых обучалась модель:**
    
  ![признаки random forest](https://github.com/Alexa-grab/screenshots--for--projects./blob/main/feature_importances_RandomForest.png)
 
  **6.2. XGBRegressor**
  
   - **Точность модели:**
     
  ![метрики regressor](https://github.com/Alexa-grab/screenshots--for--projects./blob/main/%D0%A1%D0%BA%D1%80%D0%B8%D0%BD%20%D1%82%D0%BE%D1%87%D0%BD%D0%BE%D1%81%D1%82%D1%8C%20XGBRegressor.png)
  
   - **Основные признаки на которых обучалась модель:**
     
  ![признаки regressor](https://github.com/Alexa-grab/screenshots--for--projects./blob/main/feature_importances_XGBRegessor.png)

   **6.3 Визуализация и сравнение результатов предсказаний**
   
   ![признаки regressor](https://github.com/Alexa-grab/screenshots--for--projects./blob/main/compare_models.png)

**7. Анализ данных и визуализация (Tableau)**  

Проведен  анализ данных в разрезе двух регионов. 
Интерактивный дашборд позволяет:
*   Сравнить распределение цен и основных параметров между регионами.
*   Выявить "самые выгодные" предложения (соотношение цена/качество).
*   Увидеть зависимость цены от площади, количества комнат, типа ремонта.

 **Выводы из дашборда:**

    - Регион 1: Крупный рынок с премиальным сегментом (цена м² 1 089₽)
    - Регион 2: Меньше предложений, ориентирован на эконом-класс (цена м² 776₽)
    - Комфорт-класс доступнее в Регионе 1 (от 99 000₽ vs 120 000₽)
    - Сегментация: Регион 1 - комфорт/люкс, Регион 2 - стандарт

## Выводы
 
На основе представленных результатов можно сделать следующие ключевые выводы:

### 1. Сравнение эффективности моделей

| Модель | R² | MAE (₽) | MAPE | Визуальная оценка |
|--------|-----|---------|------|-------------------|
| RandomForestRegressor | 0.73 | 10,383 | 16.76% | Больше выбросов, шире разброс |
| XGBRegressor | **0.78** | **9,825** | **15.76%** | Плотнее у диагонали, меньше выбросов |

**XGBoost показывает лучшие результаты по всем метрикам:**
- Выше объясняющая способность (R² 0.78 против 0.73)
- Ниже абсолютная ошибка (на 632 ₽ в среднем)
- Ниже процентная ошибка (на 1.1 п.п.)

### 2. Анализ графиков предсказаний

**2.1. Общие закономерности для обеих моделей:**
- Хорошо работают в диапазоне до 100,000 ₽ (основной сегмент)
- Среднее качество в диапазоне 100,000-150,000 ₽
- Недооценивают дорогие объекты (>150,000 ₽) - точки ниже линии

**2.2. Отличия:**
- **Random Forest:** больше точек, значительно отклоняющихся от линии, особенно в верхнем сегменте
- **XGBoost:** более компактное облако точек, лучшее поведение на границах диапазона

### 3. Интерпретация метрик

**MAPE = 15.76% означает:**
- В среднем модель ошибается на ~15-16% от реальной цены
- Для квартиры за 50,000 ₽: ошибка ~7,500-8,000 ₽
- Для квартиры за 100,000 ₽: ошибка ~15,000-16,000 ₽

Это хороший показатель для рынка недвижимости, где цены могут варьироваться в широких пределах и зависеть от множества субъективных факторов.

### 4. Сильные стороны моделей

- Успешно улавливают основные закономерности рынка
- Хорошо работают на массовом сегменте
- Стабильные результаты (разница между моделями небольшая)
- Процентная ошибка в приемлемых пределах

### 5. Ограничения и зоны роста

**Премиальный сегмент (>150,000 ₽) требует отдельного подхода:**
- Мало данных для обучения
- Уникальные характеристики объектов плохо учитываются
- Высокая волатильность цен
- Систематическая недооценка самых дорогих объектов

## Рекомендации

### Для внедрения

- Выбрать **XGBoost** как основную модель - лучший баланс точности и стабильности

### Как использовать
- **Для квартир до 100,000 ₽** - можно полностью автоматизировать оценку
- **Для квартир 100,000-150,000 ₽** - использовать как рекомендацию с проверкой
- **Для квартир >150,000 ₽** - только как вспомогательный инструмент, обязательна экспертная оценка

### Для улучшения
- Собрать больше данных по премиальному сегменту
- Добавить признаки, важные для дорогих объектов (локация, исторический центр, инфраструктура)
- Рассмотреть отдельную модель для квартир >150,000 ₽
- Добавить бизнес-правила для корректировки выбросов

## Заключение

Разработанная модель **XGBoost с MAPE 15.76% и R² 0.78** готова к практическому использованию для прогнозирования цен 
аренды квартир в массовом сегменте. Модель успешно решает поставленную задачу и может быть рекомендована для внедрения в бизнес-процессы оценки недвижимости.

 











